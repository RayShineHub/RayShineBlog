(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{515:function(t,i,s){},520:function(t,i,s){"use strict";s(515)},567:function(t,i,s){"use strict";s.r(i);s(161),s(17),s(39),s(164),s(52),s(26),s(6),s(87),s(120),s(264),s(51),s(38),s(262);var e=s(19),n=s.n(e),r={data:function(){return{isPC:!0,playlistId:"144719593",autoPlay:!1,playHistory:!1,volumeStep:.2,defaultVolume:.4,isPlaying:!1,playType:"random",musicList:[],currentMusic:{musicId:"",currentTime:0,maxTime:0,duration:0,volume:.4,name:"",artist:"",url:"",cover:"https://p2.music.126.net/3MaeDnsU61e96WlH5-hoaQ==/109951163195183343.jpg",lrc:"",sort:0,brList:[]}}},props:{linksWrapOffsetWidth:{type:Number,default:""},isNavFixed:{type:Boolean,default:!1}},watch:{},mounted:function(){/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)?this.isPC=!1:(this.isPC=!0,this.getMusicList(this.playlistId))},methods:{getMusicList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"144719593",i=this,s=0;n()({baseURL:i.$themeConfig.back.musicUrl,url:"/playlist/detail?id="+t,withCredentials:!0}).then((function(t){if(200===t.status&&200===t.data.code){var e=t.data.playlist.trackIds.filter((function(t){return t.id})).map((function(t){return t.id})).join(",");n()({baseURL:i.$themeConfig.back.musicUrl,url:"/song/detail?ids="+e,withCredentials:!0}).then((function(t){200===t.status&&200===t.data.code&&(i.musicList=t.data.songs.map((function(i){var e=t.data.privileges.filter((function(t){return t.id==i.id})).map((function(t){return t.chargeInfoList.map((function(t){return t.rate}))}))[0];return{musicId:i.id,name:i.name||"",artist:i.ar[0].name||"",cover:i.al.picUrl||"",brList:e,sort:s++}})),i.getCurrentMusic("first"))}),(function(t){console.log(t)}))}}),(function(t){i.currentMusic.artist="歌单获取失败",console.log(t)}))},getCurrentMusic:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first";if("random"==this.playType){var s=this.musicList.filter((function(i){return i.musicId!=t.currentMusic.musicId}));this.currentMusic=Object.assign({},this.currentMusic,s[Math.floor(Math.random()*s.length)])}else if("first"===i)this.currentMusic=Object.assign({},this.currentMusic,this.musicList[0]);else{var e="prev"==i?this.currentMusic.sort--:this.currentMusic.sort++;"next"===i&&e>this.musicList.length-1?e=0:"prev"===i&&e<0&&(e=this.musicList.length-1),this.currentMusic=Object.assign({},this.currentMusic,this.musicList[e])}this.getMusic(this.currentMusic.musicId,this.currentMusic.brList[this.currentMusic.brList.length-1],i)},getMusic:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1868943615",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128e3,s=arguments.length>2?arguments[2]:void 0,e=this;n()({baseURL:e.$themeConfig.back.musicUrl,url:"/check/music?id="+t+"&br="+i,withCredentials:!0}).then((function(r){200===r.status&&r.data.success&&n()({baseURL:e.$themeConfig.back.musicUrl,url:"/song/url?id="+t+"&br="+i,withCredentials:!0}).then((function(t){200===t.status&&(e.currentMusic.url=t.data.data[0].url.match("^http://")?t.data.data[0].url.replace("http://","https://"):t.data.data[0].url,e.$refs.audio.volume=e.defaultVolume,e.currentMusic.volume=e.$refs.audio.volume,("first"!=s||"first"==s&&e.autoPlay)&&e.playHistory&&setTimeout((function(){e.$refs.audio.play()}),2e3))}),(function(t){console.log(t)}))}),(function(t){e.currentMusic.artist=t.response.data.message,e.currentMusic.url="",e.currentMusic.name="",e.currentMusic.currentTime="",setTimeout((function(){e.next()}),2e3),console.log(t)}))},onPlay:function(){return this.isPlaying?this.$refs.audio.pause():this.$refs.audio.play()},play:function(){this.playHistory=!1,this.isPlaying=!0},pause:function(){this.playHistory=!0,this.isPlaying=!1},next:function(t){this.$refs.audio.pause(),this.getCurrentMusic("next")},prev:function(t){this.$refs.audio.pause(),this.getCurrentMusic("prev")},transTime:function(t){var i=parseInt(t),s=parseInt(i/60),e=i%60+"";return 0===s?s="00":s<10&&(s="0"+s),1===e.length&&(e="0"+e),s+":"+e},onTimeupdate:function(t){this.currentMusic.currentTime=this.transTime(this.currentMusic.duration-t.target.currentTime)},onLoadedmetadata:function(t){this.currentMusic.duration=t.target.duration,this.currentMusic.maxTime=this.transTime(t.target.duration),this.currentMusic.currentTime=this.currentMusic.maxTime},onEnded:function(t){this.next()},onVolume:function(t){var i=parseInt(10*this.$refs.audio.volume),s=10*this.volumeStep;this.$refs.audio.volume="jian"===t?i-s<=0?0:(parseInt(10*this.$refs.audio.volume)-s)/10:i+s>=10?1:(parseInt(10*this.$refs.audio.volume)+s)/10,this.currentMusic.volume=this.$refs.audio.volume}}},a=(s(520),s(7)),u=Object(a.a)(r,(function(){var t=this,i=t.$createElement,s=t._self._c||i;return t.isPC?s("div",{staticClass:"nav-music",class:{pagefull:(t.$frontmatter.layout||t.$themeConfig.fullscreen&&t.$frontmatter.isFull||t.$frontmatter.home)&&!t.isNavFixed},style:t.linksWrapOffsetWidth?{right:t.linksWrapOffsetWidth+"px"}:{}},[s("div",{staticClass:"img-box"},[s("img",{staticClass:"avatar",class:{playing:t.isPlaying},attrs:{src:t.currentMusic?t.currentMusic.cover:""}})]),t._v(" "),s("div",{staticClass:"actions"},[s("div",{staticClass:"title"},[s("span",{staticStyle:{"margin-right":"0.1rem"}},[t._v("\n        "+t._s(0==t.currentMusic.currentTime?"":t.currentMusic.currentTime)+"\n      ")]),t._v(" "),s("div",{staticClass:"title-name"},[s("span",[t._v("\n          "+t._s(t.currentMusic.artist||"")+" "+t._s(t.currentMusic.name?" - ":"")+"  "+t._s(t.currentMusic.name||"")+"  \n        ")])])]),t._v(" "),s("div",{staticClass:"action-bar"},[s("i",{staticClass:"iconfont rays-bofang04-mianxing",on:{click:t.prev}}),t._v(" "),t.isPlaying?t._e():s("i",{staticClass:"iconfont rays-bofang",on:{click:t.onPlay}}),t._v(" "),t.isPlaying?s("i",{staticClass:"iconfont rays-zanting",on:{click:t.onPlay}}):t._e(),t._v(" "),s("i",{staticClass:"iconfont rays-bofang05-mianxing",on:{click:t.next}}),t._v(" "),t.currentMusic.volume<=0?s("i",{staticClass:"iconfont rays-shengyin-jinyin",staticStyle:{"margin-left":"1rem"}}):t._e(),t._v(" "),t.currentMusic.volume>0?s("i",{staticClass:"iconfont rays-shengyin-jian",staticStyle:{"margin-left":"1rem"},on:{click:function(i){return t.onVolume("jian")}}}):t._e(),t._v(" "),s("span",{staticClass:"volume"},[t._v(t._s(parseInt(10*t.currentMusic.volume)))]),t._v(" "),s("i",{staticClass:"iconfont rays-shengyin-jia",on:{click:function(i){return t.onVolume("jia")}}})])]),t._v(" "),s("audio",{ref:"audio",attrs:{autoplay:!1,src:t.currentMusic.url,volume:t.currentMusic.volume},on:{play:t.play,pause:t.pause,loadedmetadata:t.onLoadedmetadata,timeupdate:t.onTimeupdate,ended:t.onEnded}})]):t._e()}),[],!1,null,"57e4ae28",null);i.default=u.exports}}]);